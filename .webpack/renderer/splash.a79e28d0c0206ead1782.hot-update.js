"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdateprojet_kathara"]("splash",{

/***/ "./src/pages/Playground/components/Canvas/Canvas.tsx":
/*!***********************************************************!*\
  !*** ./src/pages/Playground/components/Canvas/Canvas.tsx ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Canvas = void 0;\r\nvar react_1 = __importStar(__webpack_require__(/*! react */ \"./node_modules/react/index.js\"));\r\nvar Canvas_module_scss_1 = __importDefault(__webpack_require__(/*! ./Canvas.module.scss */ \"./src/pages/Playground/components/Canvas/Canvas.module.scss\"));\r\nvar Device_1 = __webpack_require__(/*! ../../../../model/Device */ \"./src/model/Device.tsx\");\r\nvar useColoredImage_1 = __webpack_require__(/*! ../../../../hooks/useColoredImage */ \"./src/hooks/useColoredImage.ts\");\r\nvar useCssVar_1 = __webpack_require__(/*! ../../../../hooks/useCssVar */ \"./src/hooks/useCssVar.ts\");\r\nvar canvaHelper_1 = __webpack_require__(/*! ./canvaHelper */ \"./src/pages/Playground/components/Canvas/canvaHelper.ts\");\r\nvar ContextMenu_1 = __webpack_require__(/*! ../../../../components/ContextMenu/ContextMenu */ \"./src/components/ContextMenu/ContextMenu.tsx\");\r\nvar Canvas = function (_a) {\r\n    var topoJson = _a.topoJson, setSelectedDevices = _a.setSelectedDevices, selectedDevices = _a.selectedDevices, onSave = _a.onSave, onDuplicate = _a.onDuplicate, onNew = _a.onNew, _b = _a.interactive, interactive = _b === void 0 ? true : _b;\r\n    var canvasRef = (0, react_1.useRef)(null);\r\n    var canvasCenter = (0, react_1.useRef)({ x: 0, y: 0 });\r\n    var mouseDownPosRef = (0, react_1.useRef)({ x: 0, y: 0 });\r\n    var mouseButtonDownRef = (0, react_1.useRef)(canvaHelper_1.MouseButtonType.None);\r\n    var isMajPressedRef = (0, react_1.useRef)(false);\r\n    var actionTypeRef = (0, react_1.useRef)(\"select\");\r\n    var getImg = (0, useColoredImage_1.useColoredImage)()[0];\r\n    var color = (0, useCssVar_1.useCssVar)(\"--clr-main-primary\");\r\n    var _c = (0, react_1.useState)(null), mouseDownEvent = _c[0], setMouseDownEvent = _c[1];\r\n    var labOptions = [\r\n        {\r\n            label: 'New', options: Object.entries(Device_1.DeviceType).map(function (_a) {\r\n                var name = _a[0], type = _a[1];\r\n                return {\r\n                    label: name,\r\n                    onClick: function () { return onNew(type); }\r\n                };\r\n            })\r\n        },\r\n        { label: 'Duplicate', disabled: !(selectedDevices === null || selectedDevices === void 0 ? void 0 : selectedDevices.length), onClick: onDuplicate },\r\n        { separator: true },\r\n        { label: 'Save', onClick: onSave },\r\n        { label: 'Export' },\r\n    ];\r\n    var observer = (0, react_1.useRef)(new ResizeObserver(function () {\r\n        console.log(\"resize\");\r\n        resize();\r\n    }));\r\n    var getHSData = function () {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        if (!topoJson.devices.length)\r\n            return;\r\n        var mostLeftDevicePosition = ((_c = (_b = (_a = topoJson.devices) === null || _a === void 0 ? void 0 : _a.reduce(function (prev, curr) {\r\n            return curr.position.x < prev.position.x ? curr : prev;\r\n        })) === null || _b === void 0 ? void 0 : _b.position) === null || _c === void 0 ? void 0 : _c.x) -\r\n            Device_1.deviceSize.width / 2;\r\n        var mostRightDevicePosition = ((_f = (_e = (_d = topoJson.devices) === null || _d === void 0 ? void 0 : _d.reduce(function (prev, curr) {\r\n            return curr.position.x > prev.position.x ? curr : prev;\r\n        })) === null || _e === void 0 ? void 0 : _e.position) === null || _f === void 0 ? void 0 : _f.x) +\r\n            Device_1.deviceSize.width / 2;\r\n        var viewportLeft = 0 - canvasCenter.current.x;\r\n        var viewportRight = canvasRef.current.width - canvasCenter.current.x;\r\n        var mostLeft = Math.min(mostLeftDevicePosition, viewportLeft);\r\n        var mostRight = Math.max(mostRightDevicePosition, viewportRight);\r\n        var innerWidth = viewportRight - viewportLeft;\r\n        var outerWidth = mostRight - mostLeft;\r\n        var offsetRatio = (100 * (viewportLeft - mostLeft)) / outerWidth;\r\n        var ratio = (100 * innerWidth) / outerWidth;\r\n        return {\r\n            ratio: ratio,\r\n            innerWidth: innerWidth,\r\n            outerWidth: outerWidth,\r\n            offsetRatio: offsetRatio,\r\n            viewportLeft: viewportLeft,\r\n            viewportRight: viewportRight,\r\n            mostLeft: mostLeft,\r\n            mostRight: mostRight\r\n        };\r\n    };\r\n    var renderHScrollbars = function () {\r\n        if (!interactive)\r\n            return;\r\n        if (!(topoJson === null || topoJson === void 0 ? void 0 : topoJson.devices.length))\r\n            return;\r\n        var _a = getHSData(), ratio = _a.ratio, offsetRatio = _a.offsetRatio;\r\n        if (ratio === 100)\r\n            return;\r\n        var ctx = canvasRef.current.getContext(\"2d\");\r\n        if (!ctx)\r\n            return;\r\n        ctx.fillStyle = \"#333333\";\r\n        ctx.fillRect(4 * canvaHelper_1.ScrollBarWidth + ((canvasRef.current.width - canvaHelper_1.ScrollBarWidth * 5) * offsetRatio) / 100, canvasRef.current.height - canvaHelper_1.ScrollBarWidth * 2, ((canvasRef.current.width - canvaHelper_1.ScrollBarWidth * 5) * ratio) / 100, canvaHelper_1.ScrollBarWidth);\r\n    };\r\n    var getVSData = function () {\r\n        var _a, _b;\r\n        if (!topoJson.devices.length)\r\n            return;\r\n        var mostTopDevicePosition = ((_a = topoJson.devices) === null || _a === void 0 ? void 0 : _a.reduce(function (prev, curr) {\r\n            return curr.position.y < prev.position.y ? curr : prev;\r\n        }).position.y) -\r\n            Device_1.deviceSize.height / 2;\r\n        var mostBottomDevicePosition = ((_b = topoJson.devices) === null || _b === void 0 ? void 0 : _b.reduce(function (prev, curr) {\r\n            return curr.position.y > prev.position.y ? curr : prev;\r\n        }).position.y) + Device_1.deviceSize.height;\r\n        var viewportTop = 0 - canvasCenter.current.y;\r\n        var viewportBottom = canvasRef.current.height - canvasCenter.current.y;\r\n        var mostTop = Math.min(mostTopDevicePosition, viewportTop);\r\n        var mostBottom = Math.max(mostBottomDevicePosition, viewportBottom);\r\n        var innerWidth = viewportBottom - viewportTop;\r\n        var outerWidth = mostBottom - mostTop;\r\n        var ratio = (100 * innerWidth) / outerWidth;\r\n        var offsetRatio = (100 * (viewportTop - mostTop)) / outerWidth;\r\n        return {\r\n            ratio: ratio,\r\n            innerWidth: innerWidth,\r\n            outerWidth: outerWidth,\r\n            offsetRatio: offsetRatio,\r\n            viewportTop: viewportTop,\r\n            viewportBottom: viewportBottom,\r\n            mostTop: mostTop,\r\n            mostBottom: mostBottom\r\n        };\r\n    };\r\n    var renderVScrollbars = function () {\r\n        if (!interactive)\r\n            return;\r\n        if (!topoJson.devices.length)\r\n            return;\r\n        var _a = getVSData(), ratio = _a.ratio, offsetRatio = _a.offsetRatio;\r\n        if (ratio === 100)\r\n            return;\r\n        var ctx = canvasRef.current.getContext(\"2d\");\r\n        if (!ctx)\r\n            return;\r\n        ctx.fillStyle = \"#333333\";\r\n        ctx.fillRect(10, 10 + ((canvasRef.current.height - canvaHelper_1.ScrollBarWidth * 5) * offsetRatio) / 100, canvaHelper_1.ScrollBarWidth, ((canvasRef.current.height - canvaHelper_1.ScrollBarWidth * 5) * ratio) / 100);\r\n    };\r\n    var lighten = function (color, diff) {\r\n        if (diff === void 0) { diff = 50; }\r\n        return \"#\".concat(Math.min(255, parseInt(color.slice(2, 4), 16) + diff).toString(16).padStart(2, \"0\")).concat(Math.min(255, parseInt(color.slice(4, 6), 16) + diff).toString(16).padStart(2, \"0\")).concat(Math.min(255, parseInt(color.slice(6, 8), 16) + diff).toString(16).padStart(2, '0'));\r\n    };\r\n    var renderJson = function (json) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var ctx, rect, _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    ctx = canvasRef.current.getContext(\"2d\");\r\n                    rect = canvasRef.current.getBoundingClientRect();\r\n                    if (!ctx)\r\n                        return [2 /*return*/];\r\n                    ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n                    // render devices\r\n                    _a = json.devices;\r\n                    if (!_a) \r\n                    // render devices\r\n                    return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, Promise.all(json.devices.map(function (device) {\r\n                            if (!device.position)\r\n                                device.position = (device === null || device === void 0 ? void 0 : device.position) || {\r\n                                    x: rect.width / 2 - canvasCenter.current.x,\r\n                                    y: rect.height / 2 - canvasCenter.current.y,\r\n                                };\r\n                            var selected = selectedDevices === null || selectedDevices === void 0 ? void 0 : selectedDevices.includes(device);\r\n                            var color2 = selected ? lighten(color, 75) : color;\r\n                            return (function () { return __awaiter(void 0, void 0, void 0, function () {\r\n                                var image;\r\n                                return __generator(this, function (_a) {\r\n                                    switch (_a.label) {\r\n                                        case 0: return [4 /*yield*/, getImg(device.type, color2)];\r\n                                        case 1:\r\n                                            image = _a.sent();\r\n                                            image.onload = function () {\r\n                                                ctx.drawImage(image, canvasCenter.current.x + (device === null || device === void 0 ? void 0 : device.position.x) - Device_1.deviceSize.width / 2, canvasCenter.current.y + (device === null || device === void 0 ? void 0 : device.position.y) - Device_1.deviceSize.height / 2, Device_1.deviceSize.width, Device_1.deviceSize.height);\r\n                                            };\r\n                                            image.complete && image.onload(null);\r\n                                            ctx.textAlign = \"center\";\r\n                                            ctx.fillStyle = color2;\r\n                                            ctx.font = \"\".concat(selected ? '800 18px' : '700 16px', \" 'Be Vietnam Pro'\");\r\n                                            ctx.font;\r\n                                            ctx.fillText(device.deviceName, canvasCenter.current.x + (device === null || device === void 0 ? void 0 : device.position.x), canvasCenter.current.y +\r\n                                                (device === null || device === void 0 ? void 0 : device.position.y) -\r\n                                                Device_1.deviceSize.height / 2 +\r\n                                                Device_1.deviceSize.height +\r\n                                                20);\r\n                                            return [2 /*return*/];\r\n                                    }\r\n                                });\r\n                            }); })();\r\n                        }))];\r\n                case 1:\r\n                    _a = (_b.sent());\r\n                    _b.label = 2;\r\n                case 2:\r\n                    // render devices\r\n                    _a;\r\n                    // render links between devices\r\n                    json.devices.forEach(function (device, idx, self) {\r\n                        device.interfaces.map(function (inter) { return inter.collision_domain; });\r\n                    });\r\n                    // render scrollbars\r\n                    renderHScrollbars();\r\n                    renderVScrollbars();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    var renderSelection = function (x, y) {\r\n        var ctx = canvasRef.current.getContext(\"2d\");\r\n        ctx.fillStyle = \"rgba(0, 0, 0, 0.5)\";\r\n        ctx.fillRect(mouseDownPosRef.current.x + canvasCenter.current.x, mouseDownPosRef.current.y + canvasCenter.current.y, x - mouseDownPosRef.current.x, y - mouseDownPosRef.current.y);\r\n    };\r\n    var pageMousePositionToCanvasPosition = function (x, y) {\r\n        var rect = canvasRef.current.getBoundingClientRect();\r\n        return {\r\n            x: x - rect.left - canvasCenter.current.x,\r\n            y: y - rect.top - canvasCenter.current.y,\r\n        };\r\n    };\r\n    var getDeviceInZone = function (x1, y1, x2, y2) {\r\n        return topoJson.devices.filter(function (device) {\r\n            return (x2 >= device.position.x - Device_1.deviceSize.width / 2 &&\r\n                x1 <= device.position.x + Device_1.deviceSize.width / 2 &&\r\n                y2 >= device.position.y - Device_1.deviceSize.height / 2 &&\r\n                y1 <= device.position.y + Device_1.deviceSize.height / 2);\r\n        });\r\n    };\r\n    //#region mouse events\r\n    var handleMouseDown = function (e) {\r\n        if (!interactive)\r\n            return;\r\n        mouseButtonDownRef.current = e.buttons;\r\n        renderJson(topoJson);\r\n        if (mouseButtonDownRef.current === canvaHelper_1.MouseButtonType.MiddleClick) {\r\n            canvasRef.current.style.cursor = \"grabbing\";\r\n        }\r\n        else {\r\n            canvasRef.current.style.cursor = \"default\";\r\n        }\r\n        if (mouseButtonDownRef.current === canvaHelper_1.MouseButtonType.RightClick) {\r\n            setMouseDownEvent(e);\r\n        }\r\n        else {\r\n            setMouseDownEvent(null);\r\n        }\r\n        if (e.buttons !== canvaHelper_1.MouseButtonType.LeftClick)\r\n            return;\r\n        var position = pageMousePositionToCanvasPosition(e.pageX, e.pageY);\r\n        mouseDownPosRef.current = position;\r\n        var rect = canvasRef.current.getBoundingClientRect();\r\n        if (e.pageX - rect.left <= 20) {\r\n            return actionTypeRef.current = 'scrollY';\r\n        }\r\n        else if (e.pageY - rect.top >= rect.height - 20) {\r\n            return actionTypeRef.current = 'scrollX';\r\n        }\r\n        var devices = getDeviceInZone(position.x, position.y, position.x, position.y)[0];\r\n        if (devices && !selectedDevices.includes(devices)) {\r\n            setSelectedDevices([devices]);\r\n        }\r\n        if (!devices) {\r\n            actionTypeRef.current = \"select\";\r\n        }\r\n        else if (devices) {\r\n            actionTypeRef.current = \"move\";\r\n        }\r\n    };\r\n    var handleMouseUp = function (e) {\r\n        if (!interactive)\r\n            return;\r\n        if (actionTypeRef.current === \"select\" && mouseButtonDownRef.current === canvaHelper_1.MouseButtonType.LeftClick) {\r\n            renderJson(topoJson);\r\n            var position = pageMousePositionToCanvasPosition(e.pageX, e.pageY);\r\n            setSelectedDevices(getDeviceInZone(Math.min(mouseDownPosRef.current.x, position.x), Math.min(mouseDownPosRef.current.y, position.y), Math.max(mouseDownPosRef.current.x, position.x), Math.max(mouseDownPosRef.current.y, position.y)));\r\n        }\r\n        actionTypeRef.current = \"select\";\r\n        canvasRef.current.style.cursor = \"default\";\r\n        mouseButtonDownRef.current = canvaHelper_1.MouseButtonType.None;\r\n    };\r\n    var handleMouseMove = function (e) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var position;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!interactive)\r\n                        return [2 /*return*/];\r\n                    if (!(mouseButtonDownRef.current === canvaHelper_1.MouseButtonType.MiddleClick)) return [3 /*break*/, 1];\r\n                    canvasCenter.current.x += e.movementX;\r\n                    canvasCenter.current.y += e.movementY;\r\n                    renderJson(topoJson);\r\n                    return [3 /*break*/, 4];\r\n                case 1:\r\n                    if (!(mouseButtonDownRef.current === canvaHelper_1.MouseButtonType.LeftClick &&\r\n                        actionTypeRef.current === \"select\")) return [3 /*break*/, 3];\r\n                    position = pageMousePositionToCanvasPosition(e.pageX, e.pageY);\r\n                    return [4 /*yield*/, renderJson(topoJson)];\r\n                case 2:\r\n                    _a.sent();\r\n                    renderSelection(position.x, position.y);\r\n                    return [3 /*break*/, 4];\r\n                case 3:\r\n                    if (mouseButtonDownRef.current === canvaHelper_1.MouseButtonType.LeftClick &&\r\n                        actionTypeRef.current === \"move\") {\r\n                        selectedDevices.forEach(function (device) {\r\n                            device.position.x += e.movementX;\r\n                            device.position.y += e.movementY;\r\n                        });\r\n                        renderJson(topoJson);\r\n                    }\r\n                    else if (mouseButtonDownRef.current === canvaHelper_1.MouseButtonType.LeftClick &&\r\n                        (actionTypeRef.current === \"scrollX\" || actionTypeRef.current === \"scrollY\")) {\r\n                        // TODO: revoir le ration pour bouger la scroll bar plutot que le canvas\r\n                        if (actionTypeRef.current === \"scrollX\") {\r\n                            canvasCenter.current.x -= e.movementX;\r\n                        }\r\n                        else if (actionTypeRef.current === \"scrollY\") {\r\n                            canvasCenter.current.y -= e.movementY;\r\n                        }\r\n                        renderJson(topoJson);\r\n                    }\r\n                    _a.label = 4;\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n    var handleWheel = function (e) {\r\n        if (!interactive)\r\n            return;\r\n        canvasCenter.current.y -= e.deltaY;\r\n        canvasCenter.current.x -= e.deltaX;\r\n        if (actionTypeRef.current === \"move\" && mouseButtonDownRef.current === canvaHelper_1.MouseButtonType.LeftClick) {\r\n            selectedDevices.forEach(function (device) {\r\n                device.position.y += e.deltaY;\r\n                device.position.y += e.deltaX;\r\n            });\r\n        }\r\n        renderJson(topoJson);\r\n    };\r\n    //#endregion\r\n    //#region keyboard events\r\n    var handleKeyDown = function (e) {\r\n        if (!interactive)\r\n            return;\r\n        if (e.key === \"Shift\") {\r\n            isMajPressedRef.current = true;\r\n        }\r\n        if (e.key === \"a\" && e.ctrlKey) {\r\n            setSelectedDevices(topoJson.devices);\r\n        }\r\n        if (e.key === \"Delete\" || e.key === \"Backspace\") {\r\n            topoJson.devices = topoJson.devices.filter(function (device) { return !selectedDevices.includes(device); });\r\n            setSelectedDevices([]);\r\n        }\r\n    };\r\n    var handleKeyUp = function (e) {\r\n        if (!interactive)\r\n            return;\r\n        if (e.key === \"Shift\") {\r\n            isMajPressedRef.current = false;\r\n        }\r\n    };\r\n    //#endregion\r\n    (0, react_1.useEffect)(function () {\r\n        resize(true);\r\n        if (canvasCenter.current) {\r\n            observer.current.observe(canvasRef.current);\r\n        }\r\n        // start observing for resize\r\n    }, [canvasCenter, observer]);\r\n    var resize = function (changeCenter) {\r\n        if (changeCenter === void 0) { changeCenter = false; }\r\n        if (!canvasRef.current)\r\n            return;\r\n        var rect = canvasRef.current.getBoundingClientRect();\r\n        canvasRef.current.width = rect.width;\r\n        canvasRef.current.height = rect.height;\r\n        if (changeCenter) {\r\n            canvasCenter.current.x = rect.width / 2;\r\n            canvasCenter.current.y = rect.height / 2;\r\n        }\r\n        renderJson(topoJson);\r\n    };\r\n    (0, react_1.useEffect)(function () {\r\n        var fn = function () { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\r\n            return [2 /*return*/, renderJson(topoJson)];\r\n        }); }); };\r\n        fn();\r\n    }, [topoJson, selectedDevices]);\r\n    (0, react_1.useEffect)(function () {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h;\r\n        if (!interactive) {\r\n            var mostLeftDevicePosition = ((_c = (_b = (_a = topoJson.devices) === null || _a === void 0 ? void 0 : _a.reduce(function (prev, curr) {\r\n                return curr.position.x < prev.position.x ? curr : prev;\r\n            })) === null || _b === void 0 ? void 0 : _b.position) === null || _c === void 0 ? void 0 : _c.x) -\r\n                Device_1.deviceSize.width / 2;\r\n            var mostRightDevicePosition = ((_f = (_e = (_d = topoJson.devices) === null || _d === void 0 ? void 0 : _d.reduce(function (prev, curr) {\r\n                return curr.position.x > prev.position.x ? curr : prev;\r\n            })) === null || _e === void 0 ? void 0 : _e.position) === null || _f === void 0 ? void 0 : _f.x) +\r\n                Device_1.deviceSize.width / 2;\r\n            var mostTopDevicePosition = ((_g = topoJson.devices) === null || _g === void 0 ? void 0 : _g.reduce(function (prev, curr) {\r\n                return curr.position.y < prev.position.y ? curr : prev;\r\n            }).position.y) -\r\n                Device_1.deviceSize.height / 2;\r\n            var mostBottomDevicePosition = ((_h = topoJson.devices) === null || _h === void 0 ? void 0 : _h.reduce(function (prev, curr) {\r\n                return curr.position.y > prev.position.y ? curr : prev;\r\n            }).position.y) + Device_1.deviceSize.height;\r\n            var x = (mostLeftDevicePosition + mostRightDevicePosition) / 2;\r\n            var y = (mostTopDevicePosition + mostBottomDevicePosition) / 2;\r\n            canvasCenter.current.x = canvasCenter.current.x - x;\r\n            canvasCenter.current.y = canvasCenter.current.y - y;\r\n            renderJson(topoJson);\r\n        }\r\n    }, [interactive]);\r\n    function dragOver(e) {\r\n        e.preventDefault();\r\n    }\r\n    function dragEnter(e) {\r\n        e.preventDefault();\r\n    }\r\n    function dragDrop(e) {\r\n        if (!interactive)\r\n            return;\r\n        var device = e.dataTransfer.getData('device') ? JSON.parse(e.dataTransfer.getData('device')) : null;\r\n        if (device) {\r\n            var pos = pageMousePositionToCanvasPosition(e.clientX, e.clientY);\r\n            onNew(device.type, pos);\r\n        }\r\n    }\r\n    return react_1.default.createElement(react_1.default.Fragment, null,\r\n        react_1.default.createElement(\"canvas\", { tabIndex: 0, ref: canvasRef, className: \"\".concat(Canvas_module_scss_1.default.canvas), onMouseDown: handleMouseDown, onMouseUp: handleMouseUp, onMouseLeave: handleMouseUp, onMouseMove: handleMouseMove, onKeyDown: handleKeyDown, onKeyUp: handleKeyUp, onWheel: handleWheel, onDragOver: dragOver, onDragEnter: dragEnter, onDrop: dragDrop }),\r\n        mouseDownEvent && react_1.default.createElement(ContextMenu_1.ContextMenu, { onHide: function () { return setMouseDownEvent(null); }, options: labOptions, position: { x: mouseDownEvent === null || mouseDownEvent === void 0 ? void 0 : mouseDownEvent.clientX, y: (mouseDownEvent === null || mouseDownEvent === void 0 ? void 0 : mouseDownEvent.clientY) - 40 } }));\r\n};\r\nexports.Canvas = Canvas;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvUGxheWdyb3VuZC9jb21wb25lbnRzL0NhbnZhcy9DYW52YXMudHN4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSw4RkFPZTtBQUNmLDJKQUF5QztBQUV6Qyw2RkFBMEU7QUFDMUUsdUhBQW9FO0FBQ3BFLHFHQUF3RDtBQUN4RCx3SEFBZ0U7QUFDaEUsOElBQTZFO0FBWXRFLElBQU0sTUFBTSxHQUFHLFVBQUMsRUFRUDtRQVBkLFFBQVEsZ0JBQ1Isa0JBQWtCLDBCQUNsQixlQUFlLHVCQUNmLE1BQU0sY0FDTixXQUFXLG1CQUNYLEtBQUssYUFDTCxtQkFBa0IsRUFBbEIsV0FBVyxtQkFBRyxJQUFJO0lBR2xCLElBQU0sU0FBUyxHQUFHLGtCQUFNLEVBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0IsSUFBTSxZQUFZLEdBQUcsa0JBQU0sRUFBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFNUMsSUFBTSxlQUFlLEdBQUcsa0JBQU0sRUFBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDL0MsSUFBTSxrQkFBa0IsR0FBRyxrQkFBTSxFQUFrQiw2QkFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRXpFLElBQU0sZUFBZSxHQUFHLGtCQUFNLEVBQUMsS0FBSyxDQUFDLENBQUM7SUFFdEMsSUFBTSxhQUFhLEdBQUcsa0JBQU0sRUFBNEMsUUFBUSxDQUFDLENBQUM7SUFFM0UsVUFBTSxHQUFJLHFDQUFlLEdBQUUsR0FBckIsQ0FBc0I7SUFDbkMsSUFBTSxLQUFLLEdBQUcseUJBQVMsRUFBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQ3hDLFNBQXNDLG9CQUFRLEVBQWEsSUFBSSxDQUFDLEVBQS9ELGNBQWMsVUFBRSxpQkFBaUIsUUFBOEIsQ0FB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QUssQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQztTQUN4QjtJQUNILENBQUM7SUFFRCxPQUFPO1FBQ0wsMENBQ0UsUUFBUSxFQUFFLENBQUMsRUFDWCxHQUFHLEVBQUUsU0FBUyxFQUNkLFNBQVMsRUFBRSxVQUFHLDRCQUFLLENBQUMsTUFBTSxDQUFFLEVBQzVCLFdBQVcsRUFBRSxlQUFlLEVBQzVCLFNBQVMsRUFBRSxhQUFhLEVBQ3hCLFlBQVksRUFBRSxhQUFhLEVBQzNCLFdBQVcsRUFBRSxlQUFlLEVBQzVCLFNBQVMsRUFBRSxhQUFhLEVBQ3hCLE9BQU8sRUFBRSxXQUFXLEVBQ3BCLE9BQU8sRUFBRSxXQUFXLEVBQ3BCLFVBQVUsRUFBRSxRQUFRLEVBQ3BCLFdBQVcsRUFBRSxTQUFTLEVBQ3RCLE1BQU0sRUFBRSxRQUFRLEdBQ1I7UUFDVCxjQUFjLElBQUksOEJBQUMseUJBQVcsSUFBQyxNQUFNLEVBQUUsY0FBTSx3QkFBaUIsQ0FBQyxJQUFJLENBQUMsRUFBdkIsQ0FBdUIsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxjQUFjLGFBQWQsY0FBYyx1QkFBZCxjQUFjLENBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxlQUFjLGFBQWQsY0FBYyx1QkFBZCxjQUFjLENBQUUsT0FBTyxJQUFHLEVBQUUsRUFBRSxHQUFnQixDQUNwTDtBQUNMLENBQUMsQ0FBQztBQTVnQlcsY0FBTSxVQTRnQmpCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJvamV0LWthdGhhcmEvLi9zcmMvcGFnZXMvUGxheWdyb3VuZC9jb21wb25lbnRzL0NhbnZhcy9DYW52YXMudHN4PzYxNjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7XHJcbiAgdXNlRWZmZWN0LFxyXG4gIHVzZVJlZixcclxuICBNb3VzZUV2ZW50SGFuZGxlcixcclxuICBLZXlib2FyZEV2ZW50SGFuZGxlcixcclxuICBXaGVlbEV2ZW50SGFuZGxlcixcclxuICB1c2VTdGF0ZSxcclxufSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHN0eWxlIGZyb20gXCIuL0NhbnZhcy5tb2R1bGUuc2Nzc1wiO1xyXG5pbXBvcnQgeyBMYWIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vbW9kZWwvTGFiXCI7XHJcbmltcG9ydCB7IERldmljZSwgZGV2aWNlU2l6ZSwgRGV2aWNlVHlwZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9tb2RlbC9EZXZpY2VcIjtcclxuaW1wb3J0IHsgdXNlQ29sb3JlZEltYWdlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2hvb2tzL3VzZUNvbG9yZWRJbWFnZVwiO1xyXG5pbXBvcnQgeyB1c2VDc3NWYXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vaG9va3MvdXNlQ3NzVmFyXCI7XHJcbmltcG9ydCB7IE1vdXNlQnV0dG9uVHlwZSwgU2Nyb2xsQmFyV2lkdGggfSBmcm9tIFwiLi9jYW52YUhlbHBlclwiO1xyXG5pbXBvcnQgeyBDb250ZXh0TWVudSB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL0NvbnRleHRNZW51L0NvbnRleHRNZW51XCI7XHJcblxyXG50eXBlIENvbXBvbmVudFR5cGUgPSB7XHJcbiAgdG9wb0pzb246IExhYjtcclxuICBzZXRTZWxlY3RlZERldmljZXM/OiAoZGV2aWNlczogRGV2aWNlW10pID0+IHZvaWQ7XHJcbiAgc2VsZWN0ZWREZXZpY2VzPzogRGV2aWNlW107XHJcbiAgb25TYXZlPzogKCkgPT4gdm9pZDtcclxuICBvbkR1cGxpY2F0ZT86ICgpID0+IHZvaWQ7XHJcbiAgb25OZXc/OiAodHlwZTogRGV2aWNlVHlwZSwgcG9zPzogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9KSA9PiB2b2lkO1xyXG4gIGludGVyYWN0aXZlOiBib29sZWFuXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgQ2FudmFzID0gKHtcclxuICB0b3BvSnNvbixcclxuICBzZXRTZWxlY3RlZERldmljZXMsXHJcbiAgc2VsZWN0ZWREZXZpY2VzLFxyXG4gIG9uU2F2ZSxcclxuICBvbkR1cGxpY2F0ZSxcclxuICBvbk5ldyxcclxuICBpbnRlcmFjdGl2ZSA9IHRydWUsXHJcbn06IENvbXBvbmVudFR5cGUpID0+IHtcclxuXHJcbiAgY29uc3QgY2FudmFzUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IGNhbnZhc0NlbnRlciA9IHVzZVJlZih7IHg6IDAsIHk6IDAgfSk7XHJcblxyXG4gIGNvbnN0IG1vdXNlRG93blBvc1JlZiA9IHVzZVJlZih7IHg6IDAsIHk6IDAgfSk7XHJcbiAgY29uc3QgbW91c2VCdXR0b25Eb3duUmVmID0gdXNlUmVmPE1vdXNlQnV0dG9uVHlwZT4oTW91c2VCdXR0b25UeXBlLk5vbmUpO1xyXG5cclxuICBjb25zdCBpc01halByZXNzZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xyXG5cclxuICBjb25zdCBhY3Rpb25UeXBlUmVmID0gdXNlUmVmPFwibW92ZVwiIHwgXCJzZWxlY3RcIiB8IFwic2Nyb2xsWFwiIHwgXCJzY3JvbGxZXCI+KFwic2VsZWN0XCIpO1xyXG5cclxuICBjb25zdCBbZ2V0SW1nXSA9IHVzZUNvbG9yZWRJbWFnZSgpO1xyXG4gIGNvbnN0IGNvbG9yID0gdXNlQ3NzVmFyKFwiLS1jbHItbWFpbi1wcmltYXJ5XCIpO1xyXG4gIGNvbnN0IFttb3VzZURvd25FdmVudCwgc2V0TW91c2VEb3duRXZlbnRdID0gdXNlU3RhdGU8TW91c2VFdmVudD4obnVsbCk7XHJcblxyXG4gIGNvbnN0IGxhYk9wdGlvbnMgPSBbXHJcbiAgICB7XHJcbiAgICAgIGxhYmVsOiAnTmV3Jywgb3B0aW9uczogT2JqZWN0LmVudHJpZXMoRGV2aWNlVHlwZSkubWFwKChbbmFtZSwgdHlwZV0pID0+IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbGFiZWw6IG5hbWUsXHJcbiAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBvbk5ldyh0eXBlKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgICB7IGxhYmVsOiAnRHVwbGljYXRlJywgZGlzYWJsZWQ6ICFzZWxlY3RlZERldmljZXM/Lmxlbmd0aCwgb25DbGljazogb25EdXBsaWNhdGUgfSxcclxuICAgIHsgc2VwYXJhdG9yOiB0cnVlIH0sXHJcbiAgICB7IGxhYmVsOiAnU2F2ZScsIG9uQ2xpY2s6IG9uU2F2ZSB9LFxyXG4gICAgeyBsYWJlbDogJ0V4cG9ydCcgfSxcclxuICBdO1xyXG5cclxuICBjb25zdCBvYnNlcnZlciA9IHVzZVJlZihcclxuICAgIG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwicmVzaXplXCIpXHJcbiAgICAgIHJlc2l6ZSgpXHJcbiAgICB9KVxyXG4gIClcclxuXHJcbiAgY29uc3QgZ2V0SFNEYXRhID0gKCkgPT4ge1xyXG4gICAgaWYgKCF0b3BvSnNvbi5kZXZpY2VzLmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuXHJcbiAgICBjb25zdCBtb3N0TGVmdERldmljZVBvc2l0aW9uID1cclxuICAgICAgdG9wb0pzb24uZGV2aWNlcz8ucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGN1cnIucG9zaXRpb24ueCA8IHByZXYucG9zaXRpb24ueCA/IGN1cnIgOiBwcmV2O1xyXG4gICAgICB9KT8ucG9zaXRpb24/LnggLVxyXG4gICAgICBkZXZpY2VTaXplLndpZHRoIC8gMjtcclxuXHJcbiAgICBjb25zdCBtb3N0UmlnaHREZXZpY2VQb3NpdGlvbiA9XHJcbiAgICAgIHRvcG9Kc29uLmRldmljZXM/LnJlZHVjZSgocHJldiwgY3VycikgPT4ge1xyXG4gICAgICAgIHJldHVybiBjdXJyLnBvc2l0aW9uLnggPiBwcmV2LnBvc2l0aW9uLnggPyBjdXJyIDogcHJldjtcclxuICAgICAgfSk/LnBvc2l0aW9uPy54ICtcclxuICAgICAgZGV2aWNlU2l6ZS53aWR0aCAvIDI7XHJcblxyXG4gICAgY29uc3Qgdmlld3BvcnRMZWZ0ID0gMCAtIGNhbnZhc0NlbnRlci5jdXJyZW50Lng7XHJcbiAgICBjb25zdCB2aWV3cG9ydFJpZ2h0ID0gY2FudmFzUmVmLmN1cnJlbnQud2lkdGggLSBjYW52YXNDZW50ZXIuY3VycmVudC54O1xyXG5cclxuICAgIGNvbnN0IG1vc3RMZWZ0ID0gTWF0aC5taW4obW9zdExlZnREZXZpY2VQb3NpdGlvbiwgdmlld3BvcnRMZWZ0KTtcclxuICAgIGNvbnN0IG1vc3RSaWdodCA9IE1hdGgubWF4KG1vc3RSaWdodERldmljZVBvc2l0aW9uLCB2aWV3cG9ydFJpZ2h0KTtcclxuXHJcbiAgICBjb25zdCBpbm5lcldpZHRoID0gdmlld3BvcnRSaWdodCAtIHZpZXdwb3J0TGVmdDtcclxuICAgIGNvbnN0IG91dGVyV2lkdGggPSBtb3N0UmlnaHQgLSBtb3N0TGVmdDtcclxuXHJcbiAgICBjb25zdCBvZmZzZXRSYXRpbyA9ICgxMDAgKiAodmlld3BvcnRMZWZ0IC0gbW9zdExlZnQpKSAvIG91dGVyV2lkdGg7XHJcbiAgICBjb25zdCByYXRpbyA9ICgxMDAgKiBpbm5lcldpZHRoKSAvIG91dGVyV2lkdGhcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByYXRpbyxcclxuICAgICAgaW5uZXJXaWR0aCxcclxuICAgICAgb3V0ZXJXaWR0aCxcclxuICAgICAgb2Zmc2V0UmF0aW8sXHJcbiAgICAgIHZpZXdwb3J0TGVmdCxcclxuICAgICAgdmlld3BvcnRSaWdodCxcclxuICAgICAgbW9zdExlZnQsIG1vc3RSaWdodFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVuZGVySFNjcm9sbGJhcnMgPSAoKSA9PiB7XHJcbiAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm5cclxuICAgIGlmICghdG9wb0pzb24/LmRldmljZXMubGVuZ3RoKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgeyByYXRpbywgb2Zmc2V0UmF0aW8gfSA9IGdldEhTRGF0YSgpO1xyXG5cclxuXHJcbiAgICBpZiAocmF0aW8gPT09IDEwMCkgcmV0dXJuO1xyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzUmVmLmN1cnJlbnQuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgaWYgKCFjdHgpIHJldHVybjtcclxuICAgIGN0eC5maWxsU3R5bGUgPSBcIiMzMzMzMzNcIjtcclxuICAgIGN0eC5maWxsUmVjdChcclxuICAgICAgNCAqIFNjcm9sbEJhcldpZHRoICsgKChjYW52YXNSZWYuY3VycmVudC53aWR0aCAtIFNjcm9sbEJhcldpZHRoICogNSkgKiBvZmZzZXRSYXRpbykgLyAxMDAsXHJcbiAgICAgIGNhbnZhc1JlZi5jdXJyZW50LmhlaWdodCAtIFNjcm9sbEJhcldpZHRoICogMixcclxuICAgICAgKChjYW52YXNSZWYuY3VycmVudC53aWR0aCAtIFNjcm9sbEJhcldpZHRoICogNSkgKiByYXRpbykgLyAxMDAsXHJcbiAgICAgIFNjcm9sbEJhcldpZHRoXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldFZTRGF0YSA9ICgpID0+IHtcclxuICAgIGlmICghdG9wb0pzb24uZGV2aWNlcy5sZW5ndGgpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBtb3N0VG9wRGV2aWNlUG9zaXRpb24gPVxyXG4gICAgICB0b3BvSnNvbi5kZXZpY2VzPy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHtcclxuICAgICAgICByZXR1cm4gY3Vyci5wb3NpdGlvbi55IDwgcHJldi5wb3NpdGlvbi55ID8gY3VyciA6IHByZXY7XHJcbiAgICAgIH0pLnBvc2l0aW9uLnkgLVxyXG4gICAgICBkZXZpY2VTaXplLmhlaWdodCAvIDI7XHJcblxyXG4gICAgY29uc3QgbW9zdEJvdHRvbURldmljZVBvc2l0aW9uID1cclxuICAgICAgdG9wb0pzb24uZGV2aWNlcz8ucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGN1cnIucG9zaXRpb24ueSA+IHByZXYucG9zaXRpb24ueSA/IGN1cnIgOiBwcmV2O1xyXG4gICAgICB9KS5wb3NpdGlvbi55ICsgZGV2aWNlU2l6ZS5oZWlnaHQ7XHJcblxyXG4gICAgY29uc3Qgdmlld3BvcnRUb3AgPSAwIC0gY2FudmFzQ2VudGVyLmN1cnJlbnQueTtcclxuICAgIGNvbnN0IHZpZXdwb3J0Qm90dG9tID0gY2FudmFzUmVmLmN1cnJlbnQuaGVpZ2h0IC0gY2FudmFzQ2VudGVyLmN1cnJlbnQueTtcclxuXHJcbiAgICBjb25zdCBtb3N0VG9wID0gTWF0aC5taW4obW9zdFRvcERldmljZVBvc2l0aW9uLCB2aWV3cG9ydFRvcCk7XHJcbiAgICBjb25zdCBtb3N0Qm90dG9tID0gTWF0aC5tYXgobW9zdEJvdHRvbURldmljZVBvc2l0aW9uLCB2aWV3cG9ydEJvdHRvbSk7XHJcblxyXG4gICAgY29uc3QgaW5uZXJXaWR0aCA9IHZpZXdwb3J0Qm90dG9tIC0gdmlld3BvcnRUb3A7XHJcbiAgICBjb25zdCBvdXRlcldpZHRoID0gbW9zdEJvdHRvbSAtIG1vc3RUb3A7XHJcblxyXG4gICAgY29uc3QgcmF0aW8gPSAoMTAwICogaW5uZXJXaWR0aCkgLyBvdXRlcldpZHRoO1xyXG4gICAgY29uc3Qgb2Zmc2V0UmF0aW8gPSAoMTAwICogKHZpZXdwb3J0VG9wIC0gbW9zdFRvcCkpIC8gb3V0ZXJXaWR0aDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByYXRpbyxcclxuICAgICAgaW5uZXJXaWR0aCxcclxuICAgICAgb3V0ZXJXaWR0aCxcclxuICAgICAgb2Zmc2V0UmF0aW8sXHJcbiAgICAgIHZpZXdwb3J0VG9wLFxyXG4gICAgICB2aWV3cG9ydEJvdHRvbSxcclxuICAgICAgbW9zdFRvcCwgbW9zdEJvdHRvbVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVuZGVyVlNjcm9sbGJhcnMgPSAoKSA9PiB7XHJcbiAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm5cclxuICAgIGlmICghdG9wb0pzb24uZGV2aWNlcy5sZW5ndGgpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCB7IHJhdGlvLCBvZmZzZXRSYXRpbyB9ID0gZ2V0VlNEYXRhKClcclxuXHJcbiAgICBpZiAocmF0aW8gPT09IDEwMCkgcmV0dXJuO1xyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzUmVmLmN1cnJlbnQuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgaWYgKCFjdHgpIHJldHVybjtcclxuICAgIGN0eC5maWxsU3R5bGUgPSBcIiMzMzMzMzNcIjtcclxuICAgIGN0eC5maWxsUmVjdChcclxuICAgICAgMTAsXHJcbiAgICAgIDEwICsgKChjYW52YXNSZWYuY3VycmVudC5oZWlnaHQgLSBTY3JvbGxCYXJXaWR0aCAqIDUpICogb2Zmc2V0UmF0aW8pIC8gMTAwLFxyXG4gICAgICBTY3JvbGxCYXJXaWR0aCxcclxuICAgICAgKChjYW52YXNSZWYuY3VycmVudC5oZWlnaHQgLSBTY3JvbGxCYXJXaWR0aCAqIDUpICogcmF0aW8pIC8gMTAwXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGxpZ2h0ZW4gPSAoY29sb3I6IHN0cmluZywgZGlmZiA9IDUwKSA9PiB7XHJcbiAgICByZXR1cm4gYCMke01hdGgubWluKDI1NSwgcGFyc2VJbnQoY29sb3Iuc2xpY2UoMiwgNCksIDE2KSArIGRpZmYpLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIil9JHtNYXRoLm1pbigyNTUsIHBhcnNlSW50KGNvbG9yLnNsaWNlKDQsIDYpLCAxNikgKyBkaWZmKS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpfSR7TWF0aC5taW4oMjU1LCBwYXJzZUludChjb2xvci5zbGljZSg2LCA4KSwgMTYpICsgZGlmZikudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJyl9YFxyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVuZGVySnNvbiA9IGFzeW5jIChqc29uOiBMYWIpID0+IHtcclxuICAgIGNvbnN0IGN0eCA9IGNhbnZhc1JlZi5jdXJyZW50LmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgIGNvbnN0IHJlY3QgPSBjYW52YXNSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICBpZiAoIWN0eCkgcmV0dXJuO1xyXG5cclxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzUmVmLmN1cnJlbnQud2lkdGgsIGNhbnZhc1JlZi5jdXJyZW50LmhlaWdodCk7XHJcblxyXG4gICAgICAvLyByZW5kZXIgZGV2aWNlc1xyXG4gICAganNvbi5kZXZpY2VzICYmIGF3YWl0IFByb21pc2UuYWxsKGpzb24uZGV2aWNlcy5tYXAoKGRldmljZSkgPT4ge1xyXG4gICAgICBpZiAoIWRldmljZS5wb3NpdGlvbilcclxuICAgICAgICBkZXZpY2UucG9zaXRpb24gPSBkZXZpY2U/LnBvc2l0aW9uIHx8IHtcclxuICAgICAgICAgIHg6IHJlY3Qud2lkdGggLyAyIC0gY2FudmFzQ2VudGVyLmN1cnJlbnQueCxcclxuICAgICAgICAgIHk6IHJlY3QuaGVpZ2h0IC8gMiAtIGNhbnZhc0NlbnRlci5jdXJyZW50LnksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkID0gc2VsZWN0ZWREZXZpY2VzPy5pbmNsdWRlcyhkZXZpY2UpO1xyXG4gICAgICBjb25zdCBjb2xvcjIgPSBzZWxlY3RlZCA/IGxpZ2h0ZW4oY29sb3IsIDc1KSA6IGNvbG9yO1xyXG5cclxuICAgICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgZ2V0SW1nKGRldmljZS50eXBlLCBjb2xvcjIpO1xyXG5cclxuICAgICAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICAgICAgICBpbWFnZSxcclxuICAgICAgICAgICAgY2FudmFzQ2VudGVyLmN1cnJlbnQueCArIGRldmljZT8ucG9zaXRpb24ueCAtIGRldmljZVNpemUud2lkdGggLyAyLFxyXG4gICAgICAgICAgICBjYW52YXNDZW50ZXIuY3VycmVudC55ICsgZGV2aWNlPy5wb3NpdGlvbi55IC0gZGV2aWNlU2l6ZS5oZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICBkZXZpY2VTaXplLndpZHRoLFxyXG4gICAgICAgICAgICBkZXZpY2VTaXplLmhlaWdodFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbWFnZS5jb21wbGV0ZSAmJiBpbWFnZS5vbmxvYWQobnVsbCk7XHJcblxyXG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjI7XHJcbiAgICAgICAgY3R4LmZvbnQgPSBgJHtzZWxlY3RlZCA/ICc4MDAgMThweCcgOiAnNzAwIDE2cHgnfSAnQmUgVmlldG5hbSBQcm8nYDtcclxuICAgICAgICBjdHguZm9udFxyXG4gICAgICAgIGN0eC5maWxsVGV4dChcclxuICAgICAgICAgIGRldmljZS5kZXZpY2VOYW1lLFxyXG4gICAgICAgICAgY2FudmFzQ2VudGVyLmN1cnJlbnQueCArIGRldmljZT8ucG9zaXRpb24ueCxcclxuICAgICAgICAgIGNhbnZhc0NlbnRlci5jdXJyZW50LnkgK1xyXG4gICAgICAgICAgZGV2aWNlPy5wb3NpdGlvbi55IC1cclxuICAgICAgICAgIGRldmljZVNpemUuaGVpZ2h0IC8gMiArXHJcbiAgICAgICAgICBkZXZpY2VTaXplLmhlaWdodCArXHJcbiAgICAgICAgICAyMFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pKCk7XHJcblxyXG4gICAgfSkpO1xyXG5cclxuICAgIC8vIHJlbmRlciBsaW5rcyBiZXR3ZWVuIGRldmljZXNcclxuICAgIGpzb24uZGV2aWNlcy5mb3JFYWNoKChkZXZpY2UsIGlkeCwgc2VsZikgPT4ge1xyXG4gICAgICBkZXZpY2UuaW50ZXJmYWNlcy5tYXAoaW50ZXIgPT4gaW50ZXIuY29sbGlzaW9uX2RvbWFpbik7XHJcbiAgICB9KVxyXG5cclxuXHJcbiAgICAvLyByZW5kZXIgc2Nyb2xsYmFyc1xyXG4gICAgcmVuZGVySFNjcm9sbGJhcnMoKTtcclxuICAgIHJlbmRlclZTY3JvbGxiYXJzKCk7XHJcbiAgfTtcclxuXHJcblxyXG4gIGNvbnN0IHJlbmRlclNlbGVjdGlvbiA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgY3R4ID0gKGNhbnZhc1JlZi5jdXJyZW50IGFzIEhUTUxDYW52YXNFbGVtZW50KS5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG4gICAgY3R4LmZpbGxTdHlsZSA9IFwicmdiYSgwLCAwLCAwLCAwLjUpXCI7XHJcbiAgICBjdHguZmlsbFJlY3QoXHJcbiAgICAgIG1vdXNlRG93blBvc1JlZi5jdXJyZW50LnggKyBjYW52YXNDZW50ZXIuY3VycmVudC54LFxyXG4gICAgICBtb3VzZURvd25Qb3NSZWYuY3VycmVudC55ICsgY2FudmFzQ2VudGVyLmN1cnJlbnQueSxcclxuICAgICAgeCAtIG1vdXNlRG93blBvc1JlZi5jdXJyZW50LngsXHJcbiAgICAgIHkgLSBtb3VzZURvd25Qb3NSZWYuY3VycmVudC55XHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHBhZ2VNb3VzZVBvc2l0aW9uVG9DYW52YXNQb3NpdGlvbiA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgcmVjdCA9IGNhbnZhc1JlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHg6IHggLSByZWN0LmxlZnQgLSBjYW52YXNDZW50ZXIuY3VycmVudC54LFxyXG4gICAgICB5OiB5IC0gcmVjdC50b3AgLSBjYW52YXNDZW50ZXIuY3VycmVudC55LFxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXREZXZpY2VJblpvbmUgPSAoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcikgPT4ge1xyXG4gICAgcmV0dXJuIHRvcG9Kc29uLmRldmljZXMuZmlsdGVyKChkZXZpY2UpID0+IHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICB4MiA+PSBkZXZpY2UucG9zaXRpb24ueCAtIGRldmljZVNpemUud2lkdGggLyAyICYmXHJcbiAgICAgICAgeDEgPD0gZGV2aWNlLnBvc2l0aW9uLnggKyBkZXZpY2VTaXplLndpZHRoIC8gMiAmJlxyXG4gICAgICAgIHkyID49IGRldmljZS5wb3NpdGlvbi55IC0gZGV2aWNlU2l6ZS5oZWlnaHQgLyAyICYmXHJcbiAgICAgICAgeTEgPD0gZGV2aWNlLnBvc2l0aW9uLnkgKyBkZXZpY2VTaXplLmhlaWdodCAvIDJcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vI3JlZ2lvbiBtb3VzZSBldmVudHNcclxuXHJcbiAgY29uc3QgaGFuZGxlTW91c2VEb3duOiBNb3VzZUV2ZW50SGFuZGxlciA9IChlKSA9PiB7XHJcbiAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm5cclxuICAgIG1vdXNlQnV0dG9uRG93blJlZi5jdXJyZW50ID0gZS5idXR0b25zO1xyXG5cclxuICAgIHJlbmRlckpzb24odG9wb0pzb24pO1xyXG5cclxuICAgIGlmIChtb3VzZUJ1dHRvbkRvd25SZWYuY3VycmVudCA9PT0gTW91c2VCdXR0b25UeXBlLk1pZGRsZUNsaWNrKSB7XHJcbiAgICAgIGNhbnZhc1JlZi5jdXJyZW50LnN0eWxlLmN1cnNvciA9IFwiZ3JhYmJpbmdcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbnZhc1JlZi5jdXJyZW50LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChtb3VzZUJ1dHRvbkRvd25SZWYuY3VycmVudCA9PT0gTW91c2VCdXR0b25UeXBlLlJpZ2h0Q2xpY2spIHtcclxuICAgICAgc2V0TW91c2VEb3duRXZlbnQoZSBhcyBhbnkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0TW91c2VEb3duRXZlbnQobnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGUuYnV0dG9ucyAhPT0gTW91c2VCdXR0b25UeXBlLkxlZnRDbGljaykgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHBvc2l0aW9uID0gcGFnZU1vdXNlUG9zaXRpb25Ub0NhbnZhc1Bvc2l0aW9uKGUucGFnZVgsIGUucGFnZVkpO1xyXG4gICAgbW91c2VEb3duUG9zUmVmLmN1cnJlbnQgPSBwb3NpdGlvbjtcclxuXHJcbiAgICBjb25zdCByZWN0ID0gY2FudmFzUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBpZiAoZS5wYWdlWCAtIHJlY3QubGVmdCA8PSAyMCkge1xyXG4gICAgICByZXR1cm4gYWN0aW9uVHlwZVJlZi5jdXJyZW50ID0gJ3Njcm9sbFknO1xyXG4gICAgfSBlbHNlIGlmIChlLnBhZ2VZIC0gcmVjdC50b3AgPj0gcmVjdC5oZWlnaHQgLSAyMCkge1xyXG4gICAgICByZXR1cm4gYWN0aW9uVHlwZVJlZi5jdXJyZW50ID0gJ3Njcm9sbFgnO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtkZXZpY2VzXSA9IGdldERldmljZUluWm9uZShcclxuICAgICAgcG9zaXRpb24ueCxcclxuICAgICAgcG9zaXRpb24ueSxcclxuICAgICAgcG9zaXRpb24ueCxcclxuICAgICAgcG9zaXRpb24ueVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoZGV2aWNlcyAmJiAhc2VsZWN0ZWREZXZpY2VzLmluY2x1ZGVzKGRldmljZXMpKSB7XHJcbiAgICAgIHNldFNlbGVjdGVkRGV2aWNlcyhbZGV2aWNlc10pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZGV2aWNlcykge1xyXG4gICAgICBhY3Rpb25UeXBlUmVmLmN1cnJlbnQgPSBcInNlbGVjdFwiO1xyXG4gICAgfSBlbHNlIGlmIChkZXZpY2VzKSB7XHJcbiAgICAgIGFjdGlvblR5cGVSZWYuY3VycmVudCA9IFwibW92ZVwiO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU1vdXNlVXA6IE1vdXNlRXZlbnRIYW5kbGVyID0gKGUpID0+IHtcclxuICAgIGlmICghaW50ZXJhY3RpdmUpIHJldHVyblxyXG5cclxuICAgIGlmIChhY3Rpb25UeXBlUmVmLmN1cnJlbnQgPT09IFwic2VsZWN0XCIgJiYgbW91c2VCdXR0b25Eb3duUmVmLmN1cnJlbnQgPT09IE1vdXNlQnV0dG9uVHlwZS5MZWZ0Q2xpY2spIHtcclxuICAgICAgcmVuZGVySnNvbih0b3BvSnNvbik7XHJcblxyXG4gICAgICBjb25zdCBwb3NpdGlvbiA9IHBhZ2VNb3VzZVBvc2l0aW9uVG9DYW52YXNQb3NpdGlvbihlLnBhZ2VYLCBlLnBhZ2VZKTtcclxuXHJcbiAgICAgIHNldFNlbGVjdGVkRGV2aWNlcyhcclxuICAgICAgICBnZXREZXZpY2VJblpvbmUoXHJcbiAgICAgICAgICBNYXRoLm1pbihtb3VzZURvd25Qb3NSZWYuY3VycmVudC54LCBwb3NpdGlvbi54KSxcclxuICAgICAgICAgIE1hdGgubWluKG1vdXNlRG93blBvc1JlZi5jdXJyZW50LnksIHBvc2l0aW9uLnkpLFxyXG4gICAgICAgICAgTWF0aC5tYXgobW91c2VEb3duUG9zUmVmLmN1cnJlbnQueCwgcG9zaXRpb24ueCksXHJcbiAgICAgICAgICBNYXRoLm1heChtb3VzZURvd25Qb3NSZWYuY3VycmVudC55LCBwb3NpdGlvbi55KVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhY3Rpb25UeXBlUmVmLmN1cnJlbnQgPSBcInNlbGVjdFwiO1xyXG4gICAgY2FudmFzUmVmLmN1cnJlbnQuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XHJcbiAgICBtb3VzZUJ1dHRvbkRvd25SZWYuY3VycmVudCA9IE1vdXNlQnV0dG9uVHlwZS5Ob25lO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU1vdXNlTW92ZTogTW91c2VFdmVudEhhbmRsZXIgPSBhc3luYyAoZSkgPT4ge1xyXG4gICAgaWYgKCFpbnRlcmFjdGl2ZSkgcmV0dXJuXHJcblxyXG4gICAgaWYgKG1vdXNlQnV0dG9uRG93blJlZi5jdXJyZW50ID09PSBNb3VzZUJ1dHRvblR5cGUuTWlkZGxlQ2xpY2spIHtcclxuICAgICAgY2FudmFzQ2VudGVyLmN1cnJlbnQueCArPSBlLm1vdmVtZW50WDtcclxuICAgICAgY2FudmFzQ2VudGVyLmN1cnJlbnQueSArPSBlLm1vdmVtZW50WTtcclxuICAgICAgcmVuZGVySnNvbih0b3BvSnNvbik7XHJcbiAgICB9IGVsc2UgaWYgKFxyXG4gICAgICBtb3VzZUJ1dHRvbkRvd25SZWYuY3VycmVudCA9PT0gTW91c2VCdXR0b25UeXBlLkxlZnRDbGljayAmJlxyXG4gICAgICBhY3Rpb25UeXBlUmVmLmN1cnJlbnQgPT09IFwic2VsZWN0XCJcclxuICAgICkge1xyXG4gICAgICBjb25zdCBwb3NpdGlvbiA9IHBhZ2VNb3VzZVBvc2l0aW9uVG9DYW52YXNQb3NpdGlvbihlLnBhZ2VYLCBlLnBhZ2VZKTtcclxuICAgICAgYXdhaXQgcmVuZGVySnNvbih0b3BvSnNvbik7XHJcbiAgICAgIHJlbmRlclNlbGVjdGlvbihwb3NpdGlvbi54LCBwb3NpdGlvbi55KTtcclxuICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgIG1vdXNlQnV0dG9uRG93blJlZi5jdXJyZW50ID09PSBNb3VzZUJ1dHRvblR5cGUuTGVmdENsaWNrICYmXHJcbiAgICAgIGFjdGlvblR5cGVSZWYuY3VycmVudCA9PT0gXCJtb3ZlXCJcclxuICAgICkge1xyXG4gICAgICBzZWxlY3RlZERldmljZXMuZm9yRWFjaCgoZGV2aWNlKSA9PiB7XHJcbiAgICAgICAgZGV2aWNlLnBvc2l0aW9uLnggKz0gZS5tb3ZlbWVudFg7XHJcbiAgICAgICAgZGV2aWNlLnBvc2l0aW9uLnkgKz0gZS5tb3ZlbWVudFk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZW5kZXJKc29uKHRvcG9Kc29uKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKG1vdXNlQnV0dG9uRG93blJlZi5jdXJyZW50ID09PSBNb3VzZUJ1dHRvblR5cGUuTGVmdENsaWNrICYmXHJcbiAgICAgIChhY3Rpb25UeXBlUmVmLmN1cnJlbnQgPT09IFwic2Nyb2xsWFwiIHx8IGFjdGlvblR5cGVSZWYuY3VycmVudCA9PT0gXCJzY3JvbGxZXCIpKSB7XHJcblxyXG4gICAgICAvLyBUT0RPOiByZXZvaXIgbGUgcmF0aW9uIHBvdXIgYm91Z2VyIGxhIHNjcm9sbCBiYXIgcGx1dG90IHF1ZSBsZSBjYW52YXNcclxuXHJcbiAgICAgIGlmIChhY3Rpb25UeXBlUmVmLmN1cnJlbnQgPT09IFwic2Nyb2xsWFwiKSB7XHJcbiAgICAgICAgY2FudmFzQ2VudGVyLmN1cnJlbnQueCAtPSBlLm1vdmVtZW50WDtcclxuICAgICAgfSBlbHNlIGlmIChhY3Rpb25UeXBlUmVmLmN1cnJlbnQgPT09IFwic2Nyb2xsWVwiKSB7XHJcbiAgICAgICAgY2FudmFzQ2VudGVyLmN1cnJlbnQueSAtPSBlLm1vdmVtZW50WTtcclxuICAgICAgfVxyXG4gICAgICByZW5kZXJKc29uKHRvcG9Kc29uKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVXaGVlbDogV2hlZWxFdmVudEhhbmRsZXIgPSAoZSkgPT4ge1xyXG4gICAgaWYgKCFpbnRlcmFjdGl2ZSkgcmV0dXJuXHJcblxyXG4gICAgY2FudmFzQ2VudGVyLmN1cnJlbnQueSAtPSBlLmRlbHRhWTtcclxuICAgIGNhbnZhc0NlbnRlci5jdXJyZW50LnggLT0gZS5kZWx0YVg7XHJcblxyXG4gICAgaWYgKGFjdGlvblR5cGVSZWYuY3VycmVudCA9PT0gXCJtb3ZlXCIgJiYgbW91c2VCdXR0b25Eb3duUmVmLmN1cnJlbnQgPT09IE1vdXNlQnV0dG9uVHlwZS5MZWZ0Q2xpY2spIHtcclxuICAgICAgc2VsZWN0ZWREZXZpY2VzLmZvckVhY2goKGRldmljZSkgPT4ge1xyXG4gICAgICAgIGRldmljZS5wb3NpdGlvbi55ICs9IGUuZGVsdGFZO1xyXG4gICAgICAgIGRldmljZS5wb3NpdGlvbi55ICs9IGUuZGVsdGFYO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJKc29uKHRvcG9Kc29uKTtcclxuICB9O1xyXG5cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgLy8jcmVnaW9uIGtleWJvYXJkIGV2ZW50c1xyXG5cclxuICBjb25zdCBoYW5kbGVLZXlEb3duOiBLZXlib2FyZEV2ZW50SGFuZGxlciA9IChlKSA9PiB7XHJcbiAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm5cclxuXHJcbiAgICBpZiAoZS5rZXkgPT09IFwiU2hpZnRcIikge1xyXG4gICAgICBpc01halByZXNzZWRSZWYuY3VycmVudCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiYVwiICYmIGUuY3RybEtleSkge1xyXG4gICAgICBzZXRTZWxlY3RlZERldmljZXModG9wb0pzb24uZGV2aWNlcyk7XHJcbiAgICB9XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRGVsZXRlXCIgfHwgZS5rZXkgPT09IFwiQmFja3NwYWNlXCIpIHtcclxuICAgICAgdG9wb0pzb24uZGV2aWNlcyA9IHRvcG9Kc29uLmRldmljZXMuZmlsdGVyKFxyXG4gICAgICAgIChkZXZpY2UpID0+ICFzZWxlY3RlZERldmljZXMuaW5jbHVkZXMoZGV2aWNlKVxyXG4gICAgICApO1xyXG4gICAgICBzZXRTZWxlY3RlZERldmljZXMoW10pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZUtleVVwOiBLZXlib2FyZEV2ZW50SGFuZGxlciA9IChlKSA9PiB7XHJcbiAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm5cclxuXHJcbiAgICBpZiAoZS5rZXkgPT09IFwiU2hpZnRcIikge1xyXG4gICAgICBpc01halByZXNzZWRSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgcmVzaXplKHRydWUpO1xyXG4gICAgaWYgKGNhbnZhc0NlbnRlci5jdXJyZW50KSB7XHJcbiAgICAgIG9ic2VydmVyLmN1cnJlbnQub2JzZXJ2ZShjYW52YXNSZWYuY3VycmVudClcclxuICAgIH1cclxuXHJcbiAgICAvLyBzdGFydCBvYnNlcnZpbmcgZm9yIHJlc2l6ZVxyXG4gIH0sIFtjYW52YXNDZW50ZXIsIG9ic2VydmVyXSk7XHJcblxyXG4gIGNvbnN0IHJlc2l6ZSA9IChjaGFuZ2VDZW50ZXIgPSBmYWxzZSkgPT4ge1xyXG4gICAgaWYgKCFjYW52YXNSZWYuY3VycmVudCkgcmV0dXJuO1xyXG4gICAgY29uc3QgcmVjdCA9IGNhbnZhc1JlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgIGNhbnZhc1JlZi5jdXJyZW50LndpZHRoID0gcmVjdC53aWR0aDtcclxuICAgIGNhbnZhc1JlZi5jdXJyZW50LmhlaWdodCA9IHJlY3QuaGVpZ2h0O1xyXG5cclxuICAgIGlmIChjaGFuZ2VDZW50ZXIpIHtcclxuICAgICAgY2FudmFzQ2VudGVyLmN1cnJlbnQueCA9IHJlY3Qud2lkdGggLyAyO1xyXG4gICAgICBjYW52YXNDZW50ZXIuY3VycmVudC55ID0gcmVjdC5oZWlnaHQgLyAyO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckpzb24odG9wb0pzb24pO1xyXG4gIH1cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGZuID0gYXN5bmMgKCkgPT4gcmVuZGVySnNvbih0b3BvSnNvbilcclxuICAgIGZuKCk7XHJcbiAgfSwgW3RvcG9Kc29uLCBzZWxlY3RlZERldmljZXNdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghaW50ZXJhY3RpdmUpIHtcclxuICAgICAgY29uc3QgbW9zdExlZnREZXZpY2VQb3NpdGlvbiA9XHJcbiAgICAgICAgdG9wb0pzb24uZGV2aWNlcz8ucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gY3Vyci5wb3NpdGlvbi54IDwgcHJldi5wb3NpdGlvbi54ID8gY3VyciA6IHByZXY7XHJcbiAgICAgICAgfSk/LnBvc2l0aW9uPy54IC1cclxuICAgICAgICBkZXZpY2VTaXplLndpZHRoIC8gMjtcclxuXHJcbiAgICAgIGNvbnN0IG1vc3RSaWdodERldmljZVBvc2l0aW9uID1cclxuICAgICAgICB0b3BvSnNvbi5kZXZpY2VzPy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHtcclxuICAgICAgICAgIHJldHVybiBjdXJyLnBvc2l0aW9uLnggPiBwcmV2LnBvc2l0aW9uLnggPyBjdXJyIDogcHJldjtcclxuICAgICAgICB9KT8ucG9zaXRpb24/LnggK1xyXG4gICAgICAgIGRldmljZVNpemUud2lkdGggLyAyO1xyXG5cclxuXHJcbiAgICAgIGNvbnN0IG1vc3RUb3BEZXZpY2VQb3NpdGlvbiA9XHJcbiAgICAgICAgdG9wb0pzb24uZGV2aWNlcz8ucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gY3Vyci5wb3NpdGlvbi55IDwgcHJldi5wb3NpdGlvbi55ID8gY3VyciA6IHByZXY7XHJcbiAgICAgICAgfSkucG9zaXRpb24ueSAtXHJcbiAgICAgICAgZGV2aWNlU2l6ZS5oZWlnaHQgLyAyO1xyXG5cclxuICAgICAgY29uc3QgbW9zdEJvdHRvbURldmljZVBvc2l0aW9uID1cclxuICAgICAgICB0b3BvSnNvbi5kZXZpY2VzPy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHtcclxuICAgICAgICAgIHJldHVybiBjdXJyLnBvc2l0aW9uLnkgPiBwcmV2LnBvc2l0aW9uLnkgPyBjdXJyIDogcHJldjtcclxuICAgICAgICB9KS5wb3NpdGlvbi55ICsgZGV2aWNlU2l6ZS5oZWlnaHQ7XHJcblxyXG4gICAgICBjb25zdCB4ID0gKG1vc3RMZWZ0RGV2aWNlUG9zaXRpb24gKyBtb3N0UmlnaHREZXZpY2VQb3NpdGlvbikgLyAyXHJcbiAgICAgIGNvbnN0IHkgPSAobW9zdFRvcERldmljZVBvc2l0aW9uICsgbW9zdEJvdHRvbURldmljZVBvc2l0aW9uKSAvIDJcclxuXHJcblxyXG4gICAgICBjYW52YXNDZW50ZXIuY3VycmVudC54ID0gY2FudmFzQ2VudGVyLmN1cnJlbnQueCAtIHhcclxuICAgICAgY2FudmFzQ2VudGVyLmN1cnJlbnQueSA9IGNhbnZhc0NlbnRlci5jdXJyZW50LnkgLSB5XHJcbiAgICAgIHJlbmRlckpzb24odG9wb0pzb24pO1xyXG5cclxuICAgIH1cclxuICB9LCBbaW50ZXJhY3RpdmVdKVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gIGZ1bmN0aW9uIGRyYWdPdmVyKGU6IGFueSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZHJhZ0VudGVyKGU6IGFueSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZHJhZ0Ryb3AoZTogYW55KSB7XHJcbiAgICBpZiAoIWludGVyYWN0aXZlKSByZXR1cm5cclxuXHJcbiAgICBjb25zdCBkZXZpY2U6IERldmljZSB8IG51bGwgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdkZXZpY2UnKSA/IEpTT04ucGFyc2UoZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgnZGV2aWNlJykpIDogbnVsbDtcclxuICAgIGlmIChkZXZpY2UpIHtcclxuICAgICAgY29uc3QgcG9zID0gcGFnZU1vdXNlUG9zaXRpb25Ub0NhbnZhc1Bvc2l0aW9uKGUuY2xpZW50WCwgZS5jbGllbnRZKVxyXG4gICAgICBvbk5ldyhkZXZpY2UudHlwZSwgcG9zKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIDw+XHJcbiAgICA8Y2FudmFzXHJcbiAgICAgIHRhYkluZGV4PXswfVxyXG4gICAgICByZWY9e2NhbnZhc1JlZn1cclxuICAgICAgY2xhc3NOYW1lPXtgJHtzdHlsZS5jYW52YXN9YH1cclxuICAgICAgb25Nb3VzZURvd249e2hhbmRsZU1vdXNlRG93bn1cclxuICAgICAgb25Nb3VzZVVwPXtoYW5kbGVNb3VzZVVwfVxyXG4gICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlVXB9XHJcbiAgICAgIG9uTW91c2VNb3ZlPXtoYW5kbGVNb3VzZU1vdmV9XHJcbiAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn1cclxuICAgICAgb25LZXlVcD17aGFuZGxlS2V5VXB9XHJcbiAgICAgIG9uV2hlZWw9e2hhbmRsZVdoZWVsfVxyXG4gICAgICBvbkRyYWdPdmVyPXtkcmFnT3Zlcn1cclxuICAgICAgb25EcmFnRW50ZXI9e2RyYWdFbnRlcn1cclxuICAgICAgb25Ecm9wPXtkcmFnRHJvcH1cclxuICAgID48L2NhbnZhcz5cclxuICAgIHttb3VzZURvd25FdmVudCAmJiA8Q29udGV4dE1lbnUgb25IaWRlPXsoKSA9PiBzZXRNb3VzZURvd25FdmVudChudWxsKX0gb3B0aW9ucz17bGFiT3B0aW9uc30gcG9zaXRpb249e3sgeDogbW91c2VEb3duRXZlbnQ/LmNsaWVudFgsIHk6IG1vdXNlRG93bkV2ZW50Py5jbGllbnRZIC0gNDAgfX0+PC9Db250ZXh0TWVudT59XHJcbiAgPC8+XHJcbn07XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/pages/Playground/components/Canvas/Canvas.tsx\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("813a4070fed521198142")
/******/ })();
/******/ 
/******/ }
);